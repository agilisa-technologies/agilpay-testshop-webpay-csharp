<!DOCTYPE html>
<html lang="es"
      class=" js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> - Agilisa Technologies</title>
    <link href="../bootstrap.css" rel="stylesheet">
    <link href="../site.css" rel="stylesheet">

    <script src="../../Scripts/modernizr-2.8.3.js"></script>


    <link href="../font-awesome.min.css" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <style>
        input[type=text],
        select,
        label {
            text-align: left;
        }
    </style>

</head>

<body style="background-color: #eee">
    <div class="container body-content">
        <div class="wrapper">
            <div class="col-md-12">
                <div class="container-info">

                    <form action="../../ShoppingCart/Payment_EN" class="form-horizontal"
                          form="EntryPoint" id="EntryPoint" method="post"  style="background-color: white; padding: 10px;">

                        <input name="Authentication" id="Authentication" class="form-control" type="hidden">
                        <h3>Shopping Cart Test</h3>
                        <hr>
                        <div class="panel panel-primary">
                            <h4>
                                General Information
                            </h4>
                            <div class="panel-body">

                                <div class="form-horizontal">
                                    <div class="row">
                                        <div class="col-6">
                                            <label class="control-label" for="SiteID">SiteID</label>
                                            <div>
                                                <input id="SiteID" name="SiteID" class="form-control" type="text" value="8b0b8cf1eb402ew7a89">
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <label class="control-label">Secret</label>
                                            <div>
                                                <label id="Key" ,="" name="Key" class="form-control">AgilisaTechnologies</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <label class="control-label" for="UserID">UserID</label>
                                            <div>
                                                <input name="UserID" id="UserID" type="text" value="User-47748" class="form-control text-box single-line"
                                                       data-val="true" data-val-length="El campo IDUsuario debe contener 50 o menos caracteres" data-val-length-max="50" data-val-required="The UserID field is required.">
                                                <span class="field-validation-valid text-danger" data-valmsg-for="UserID" data-valmsg-replace="true"></span>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <label class="control-label" for="Names">Names</label>
                                            <div>
                                                <input name="Names" type="text" value="Johm Smith" class="form-control text-box single-line"
                                                       data-val="true" data-val-length="The field Names must be a string with a maximum length of 120." data-val-length-max="120" data-val-required="The Nombres field is required." id="Nombres">
                                                <span class="field-validation-valid text-danger" data-valmsg-for="Names" data-valmsg-replace="true"></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <label class="control-label" for="EMail">EMail</label>
                                            <div>
                                                <input id="EMail" name="EMail" type="text" value="j.smith@gmail.com" class="form-control text-box single-line"
                                                       data-val="true" data-val-required="The EMail field is required.">
                                                <span class="field-validation-valid text-danger" data-valmsg-for="EMail" data-valmsg-replace="true"></span>
                                            </div>
                                        </div>

                                        <div class="col">
                                            <label class="control-label" for="Identification">Identification</label>
                                            <div>
                                                <input id="Identification" name="Identification" type="text" value="00520201129" class="form-control text-box single-line"
                                                       data-val="true" data-val-length="The field Identificacion must be a string with a maximum length of 50." data-val-length-max="50" data-val-required="The Identificacion field is required.">
                                                <span class="field-validation-valid text-danger"
                                                      data-valmsg-for="Identification" data-valmsg-replace="true"></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <label class="control-label" for="ReturnURL">ReturnURL</label>
                                            <div>
                                                <input name="ReturnURL" type="text" value="https://stage.agilpay.net/WebPay/content/mock/test_page.html" class="form-control text-box single-line"
                                                       data-val="true" data-val-length="The field UrlRetorno must be a string with a maximum length of 200." data-val-length-max="200" data-val-required="The UrlRetorno field is required." id="UrlRetorno">
                                                <span class="field-validation-valid text-danger" data-valmsg-for="ReturnURL" data-valmsg-replace="true"></span>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <label class="control-label"
                                                   for="URLNotification">URLNotification</label>
                                            <div>
                                                <input id="SuccessURL" name="SuccessURL" type="text" value="https://stage.agilpay.net/WebPay/ShoppingCart/SuccessOrder" class="form-control text-box single-line"
                                                       data-val="true" data-val-length="The field URLNotification must be a string with a maximum length of 200." data-val-length-max="200">
                                                <span class="field-validation-valid text-danger" data-valmsg-for="SuccessURL" data-valmsg-replace="true"></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <label class="control-label" for="Detail">Detail</label>
                                            <div class="col-md-12 p-0">
                                                <textarea name="Detail" rows="10" id="Detail" class="col-12">&lt;Detail&gt;
  &lt;Payment MerchantKey="MTk2MjA2ODE5NA==" Service="Membership" MerchantName="Repair Services" Description="Contract-3399" Amount="40.50" Tax="10.5" Currency="840"&gt;
    &lt;item Description="Laptop Azul Cromo" Quantity="1" Amount="1500.00" Tax="200.00"&gt;&lt;/item&gt;
    &lt;item Description="Descuento 1ra compra" Quantity="1" Amount="-233.06" Tax="0.00"&gt;&lt;/item&gt;
    &lt;item Description="Mouse Verde" Quantity="1" Amount="100.00" Tax="28.05"&gt;&lt;/item&gt;
  &lt;/Payment&gt;
&lt;/Detail&gt;</textarea>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Optional Fields
                                    <div style="display: none;">
                                        <div class="form-group">
                                            <label class="control-label"
                                                for="TipoIdentificacion">TipoIdentificacion</label>
                                            <div>
                                                <input value="1" class="form-control text-box single-line" data-val="true"
                                                    data-val-number="The field TipoIdentificacion must be a number."
                                                    data-val-required="The TipoIdentificacion field is required."
                                                    id="TipoIdentificacion" name="TipoIdentificacion" type="number">
                                                <span class="field-validation-valid text-danger"
                                                    data-valmsg-for="TipoIdentificacion" data-valmsg-replace="true"></span>
                                            </div>
                                        </div>                                     <div class="form-group">
                                            <label class="control-label" for="Telefono">Telefono</label>
                                            <div>
                                                <input value="8093409089" class="form-control text-box single-line"
                                                    data-val="true"
                                                    data-val-length="El campo Telefono debe contener 50 o menos caracteres"
                                                    data-val-length-max="50"
                                                    data-val-required="The Telefono field is required." id="Telefono"
                                                    name="Telefono" type="text">
                                                <span class="field-validation-valid text-danger" data-valmsg-for="Telefono"
                                                    data-valmsg-replace="true"></span>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label"
                                                for="FechaNacimiento">FechaNacimiento</label>
                                            <div>
                                                <input value="07/07/1992" class="form-control text-box single-line"
                                                    data-val="true"
                                                    data-val-date="The field FechaNacimiento must be a date."
                                                    data-val-required="The FechaNacimiento field is required."
                                                    id="FechaNacimiento" name="FechaNacimiento" type="datetime">
                                                <span class="field-validation-valid text-danger" data-toggle="tooltip"
                                                    data-valmsg-for="FechaNacimiento" data-valmsg-replace="true"
                                                    title="Solo numeros y guiones"></span>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                                <label class="control-label"
                                                    for="BillTo_Direccion">Dirección</label>
                                                <div>
                                                    <input value="C/ Las Flores #75"
                                                        class="form-control text-box single-line" data-val="true"
                                                        data-val-required="El campo Dirección es requerido"
                                                        id="BillTo_Direccion" name="BillTo.Direccion" type="text">
                                                    <span class="field-validation-valid text-danger"
                                                        data-valmsg-for="BillTo.Direccion"
                                                        data-valmsg-replace="true"></span>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label" for="BillTo_Sector">Sector</label>
                                                <div>
                                                    <input value="Invi" class="form-control text-box single-line"
                                                        data-val="true" data-val-required="El campo Sector es requerido"
                                                        id="BillTo_Sector" name="BillTo.Sector" type="text">
                                                    <span class="field-validation-valid text-danger"
                                                        data-valmsg-for="BillTo.Sector" data-valmsg-replace="true"></span>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label" for="BillTo_Ciudad">Ciudad</label>
                                                <div>
                                                    <input value="Santo Domingo Este"
                                                        class="form-control text-box single-line" data-val="true"
                                                        data-val-required="El campo Ciudad es requerido" id="BillTo_Ciudad"
                                                        name="BillTo.Ciudad" type="text">
                                                    <span class="field-validation-valid text-danger"
                                                        data-valmsg-for="BillTo.Ciudad" data-valmsg-replace="true"></span>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label"
                                                    for="BillTo_Provincia">Provincia</label>
                                                <div>
                                                    <input value="Santo Domingo" class="form-control text-box single-line"
                                                        data-val="true" data-val-required="El campo Provincia es requerido"
                                                        id="BillTo_Provincia" name="BillTo.Provincia" type="text">
                                                    <span class="field-validation-valid text-danger"
                                                        data-valmsg-for="BillTo.Provincia"
                                                        data-valmsg-replace="true"></span>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label" for="BillTo_CodigoPostal">Código
                                                    Postal</label>
                                                <div>
                                                    <input value="11301" class="form-control text-box single-line"
                                                        data-val="true"
                                                        data-val-required="El campo Código Postal es requerido"
                                                        id="BillTo_CodigoPostal" name="BillTo.CodigoPostal" type="text">
                                                    <span class="field-validation-valid text-danger"
                                                        data-valmsg-for="BillTo.CodigoPostal"
                                                        data-valmsg-replace="true"></span>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label" for="BillTo_Pais">País</label>
                                                <div>
                                                    <input value="Republica Dominicana"
                                                        class="form-control text-box single-line" data-val="true"
                                                        data-val-required="El campo País es requerido" id="BillTo_Pais"
                                                        name="BillTo.Pais" type="text">
                                                    <span class="field-validation-valid text-danger"
                                                        data-valmsg-for="BillTo.Pais" data-valmsg-replace="true"></span>
                                                </div>
                                            </div>
                                        </div>
                                    -->

                                </div>
                                <div class="form-group">
                                    <div class="col-md-offset-2 col-md-10">
                                        <input type="submit" value="Send Shopping Cart" class="btn btn-primary btn-sm">
                                        <a class="btn btn-info btn-sm" href="" onclick="javascript:window.location.reload(true);">Reset</a>
                                        <select id="NoHeader" name="NoHeader">
                                            <option value="0">Use Full Page</option>
                                            <option value="1" selected>Use IFRAME</option>
                                        </select>
                                        <select id="language" name="language">
                                            <option value="en">English</option>
                                            <option value="es">Spanish</option>
                                        </select>
                                        <a href="register.html">Register test page</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="col-12 result-frame" style="display: none;">
                <h1>Resulting IFrame (Your Page)</h1>
                <iframe name="agilpay_frame" style="width: 100%; height: 400px; border: 1px dotted #ccc; overflow: hidden;" scrolling="no"></iframe>

            </div>
        </div>
    </div>


    <script src="../../Scripts/jquery-3.5.1.min.js"></script>
    <script src="../../Scripts/bootstrap.js"></script>
    <script src="../../Scripts//respond.js"></script>

    <script>
        $(
            function () {
                $("#EntryPoint").on('submit', GenerateKey);
            }
        )

        // this should be done on server because #Key is a secret value
        function GenerateKey(event) {
            event.preventDefault();

            $('[type="submit"]', '#EntryPoint').attr('disabled', true);
            $.ajax('../../api/Hash', {
                method: 'POST',
                data: { SiteID: $('#SiteID').val(), UserID: $('#UserID').val(), Identification: $('#Identification').val(), Detail: $('#Detail').val() },
                dataType: 'json',
                success: function (hash) {
                    checkIFrameUse();
                    $('#Authentication').val(hash);
                    $("#EntryPoint").off('submit', GenerateKey);
                    $('#EntryPoint').submit()
                },
                error: function (message) {
                    console.log(message);
                    $('[type="submit"]', '#EntryPoint').attr('disabled', false);
                }
            });
        }

        function checkIFrameUse() {
            // if use IFRAME
            if ($("#NoHeader").val() == '1') {
                $(".container-info").hide();
                $(".result-frame").show();
                $("#EntryPoint").attr("target", "agilpay_frame");
            }
        }
    </script>




</body>

</html>